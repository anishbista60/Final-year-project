(() => {
var exports = {};
exports.id = 931;
exports.ids = [931];
exports.modules = {

/***/ 97783:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/@edge-runtime/cookies");

/***/ }),

/***/ 40252:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/cookie");

/***/ }),

/***/ 97999:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/path-to-regexp");

/***/ }),

/***/ 18038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 83743:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 97897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 56786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 95232:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param.js");

/***/ }),

/***/ 78652:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes.js");

/***/ }),

/***/ 53918:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/amp-context.js");

/***/ }),

/***/ 45732:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/amp-mode.js");

/***/ }),

/***/ 3280:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context.js");

/***/ }),

/***/ 92796:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/head-manager-context.js");

/***/ }),

/***/ 69274:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context.js");

/***/ }),

/***/ 64486:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-blur-svg.js");

/***/ }),

/***/ 50744:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config-context.js");

/***/ }),

/***/ 35843:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-config.js");

/***/ }),

/***/ 99552:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/image-loader");

/***/ }),

/***/ 23854:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/isomorphic/path");

/***/ }),

/***/ 11751:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix.js");

/***/ }),

/***/ 21668:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll.js");

/***/ }),

/***/ 1897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot.js");

/***/ }),

/***/ 28854:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path.js");

/***/ }),

/***/ 93297:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash.js");

/***/ }),

/***/ 93869:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/route-regex");

/***/ }),

/***/ 3349:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html.js");

/***/ }),

/***/ 82470:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/side-effect.js");

/***/ }),

/***/ 40618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils/warn-once.js");

/***/ }),

/***/ 39491:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 14300:
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ 6113:
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ 82361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 13685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 95687:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 63477:
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ 57310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 73837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 59796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 4960:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AppRouter": () => (/* reexport default from dynamic */ next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default.a),
/* harmony export */   "GlobalError": () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default.a),
/* harmony export */   "LayoutRouter": () => (/* reexport default from dynamic */ next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default.a),
/* harmony export */   "RenderFromTemplateContext": () => (/* reexport default from dynamic */ next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default.a),
/* harmony export */   "StaticGenerationSearchParamsBailoutProvider": () => (/* reexport default from dynamic */ next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_7___default.a),
/* harmony export */   "__next_app_webpack_require__": () => (/* binding */ __next_app_webpack_require__),
/* harmony export */   "createSearchParamsBailoutProxy": () => (/* reexport safe */ next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_8__.createSearchParamsBailoutProxy),
/* harmony export */   "decodeReply": () => (/* reexport safe */ next_dist_compiled_react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_10__.decodeReply),
/* harmony export */   "pages": () => (/* binding */ pages),
/* harmony export */   "renderToReadableStream": () => (/* reexport safe */ next_dist_compiled_react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_10__.renderToReadableStream),
/* harmony export */   "requestAsyncStorage": () => (/* reexport safe */ next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__.requestAsyncStorage),
/* harmony export */   "serverHooks": () => (/* reexport module object */ next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_9__),
/* harmony export */   "staticGenerationAsyncStorage": () => (/* reexport safe */ next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__.staticGenerationAsyncStorage),
/* harmony export */   "staticGenerationBailout": () => (/* reexport safe */ next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_6__.staticGenerationBailout),
/* harmony export */   "tree": () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(18829);
/* harmony import */ var next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_app_router__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(45226);
/* harmony import */ var next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_layout_router__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42872);
/* harmony import */ var next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_render_from_template_context__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(28412);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1839);
/* harmony import */ var next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_async_storage__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35120);
/* harmony import */ var next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_request_async_storage__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(79282);
/* harmony import */ var next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_bailout__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(23785);
/* harmony import */ var next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_static_generation_searchparams_bailout_provider__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(75183);
/* harmony import */ var next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_searchparams_bailout_proxy__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(15815);
/* harmony import */ var next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_hooks_server_context__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var next_dist_compiled_react_server_dom_webpack_server_edge__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(76370);

    const tree = {
        children: [
        '',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.t.bind(__webpack_require__, 23367, 23)), "/Users/anishbista/chatbot-app/chat/src/app/page.tsx"],
          
        }]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 16960)), "/Users/anishbista/chatbot-app/chat/src/app/layout.tsx"],
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 11193))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
  }
        }
      ]
      }.children;
    const pages = ["/Users/anishbista/chatbot-app/chat/src/app/page.tsx"];

    
    
    
    

    

    

    
    
    

    

    
    const __next_app_webpack_require__ = __webpack_require__
  

/***/ }),

/***/ 76418:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ page)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: ./node_modules/next-auth/react/index.js
var react = __webpack_require__(63370);
// EXTERNAL MODULE: ./node_modules/next/navigation.js
var navigation = __webpack_require__(59483);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(18038);
// EXTERNAL MODULE: ./node_modules/swr/core/dist/index.mjs
var dist = __webpack_require__(53395);
// EXTERNAL MODULE: ./node_modules/swr/subscription/dist/index.mjs
var subscription_dist = __webpack_require__(95455);
;// CONCATENATED MODULE: ./src/components/ArrowRightIcon.tsx

const ArrowRightIcon = ({ className  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("svg", {
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        strokeWidth: 1.5,
        stroke: "currentColor",
        className: className,
        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"
        })
    });
};


// EXTERNAL MODULE: ./node_modules/highlight.js/es/index.js
var es = __webpack_require__(92916);
// EXTERNAL MODULE: ./node_modules/marked/lib/marked.esm.js
var marked_esm = __webpack_require__(61957);
// EXTERNAL MODULE: ./node_modules/next/image.js
var next_image = __webpack_require__(48421);
var image_default = /*#__PURE__*/__webpack_require__.n(next_image);
;// CONCATENATED MODULE: ./src/components/Loading.tsx

const Loading = ()=>/*#__PURE__*/ jsx_runtime_.jsx("span", {
        className: "animate-spin bg-white h-6 w-[5px] rounded"
    });


;// CONCATENATED MODULE: ./src/components/UserIcon.tsx

const UserIcon = ({ className  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("svg", {
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        strokeWidth: 1.5,
        stroke: "currentColor",
        className: className,
        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"
        })
    });
};


;// CONCATENATED MODULE: ./src/components/ChatItem.tsx






marked_esm/* marked.setOptions */.TU.setOptions({
    highlight: function(code, lang) {
        const language = es/* default.getLanguage */.Z.getLanguage(lang) ? lang : "plaintext";
        return es/* default.highlight */.Z.highlight(code, {
            language
        }).value;
    }
});
const ChatItem = ({ content , is_from_bot , loading =false  })=>{
    const background = is_from_bot ? "bg-gray-800" : "bg-gray-600";
    return /*#__PURE__*/ jsx_runtime_.jsx("li", {
        className: `w-full text-gray-100 ${background}`,
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: "flex-col",
            children: [
                /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                    className: "md:max-w-2xl lg:max-w-xl xl:max-w-3xl py-6 m-auto flex flex-row items-start space-x-4",
                    children: [
                        is_from_bot ? /*#__PURE__*/ jsx_runtime_.jsx((image_default()), {
                            src: "/assets/chat-gpt-logo.png",
                            width: 30,
                            height: 30,
                            alt: "Chat GPT Logo"
                        }) : /*#__PURE__*/ jsx_runtime_.jsx(UserIcon, {
                            className: "w-[30px] flex flex-col relative start"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: "relative w-[calc(100%-115px)] flex flex-col gap-1 transition duration-100 ease-linear break-words",
                            dangerouslySetInnerHTML: {
                                __html: (0,marked_esm/* marked */.TU)(content, {
                                    breaks: true
                                })
                            }
                        })
                    ]
                }),
                loading && /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: "flex items-center justify-center pb-2",
                    children: /*#__PURE__*/ jsx_runtime_.jsx(Loading, {})
                })
            ]
        })
    });
};


;// CONCATENATED MODULE: ./src/components/ChatItemError.tsx


const ChatItemError = ({ children  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("li", {
        className: "w-full text-gray-100 bg-gray-800",
        children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
            className: "md:max-w-2xl lg:max-w-xl xl:max-w-3xl py-6 m-auto flex flex-row items-start space-x-4",
            children: [
                /*#__PURE__*/ jsx_runtime_.jsx((image_default()), {
                    src: "/assets/chat-gpt-logo.png",
                    width: 30,
                    height: 30,
                    alt: "Chat GPT Logo"
                }),
                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                    className: "relative w-[calc(100%-115px)] flex flex-col gap-1",
                    children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("span", {
                        className: "text-red-500",
                        children: [
                            "Ops! Ocorreu um erro: ",
                            children
                        ]
                    })
                })
            ]
        })
    });
};


;// CONCATENATED MODULE: ./src/components/LogoutIcon.tsx

const LogoutIcon = ({ className  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("svg", {
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        strokeWidth: "1.5",
        stroke: "currentColor",
        className: className,
        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"
        })
    });
};


;// CONCATENATED MODULE: ./src/components/MessageIcon.tsx

const MessageIcon = ({ className  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("svg", {
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        strokeWidth: "1.5",
        stroke: "currentColor",
        className: className,
        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
        })
    });
};


;// CONCATENATED MODULE: ./src/components/PlusIcon.tsx

const PlusIcon = ({ className  })=>{
    return /*#__PURE__*/ jsx_runtime_.jsx("svg", {
        xmlns: "http://www.w3.org/2000/svg",
        fill: "none",
        viewBox: "0 0 24 24",
        strokeWidth: "1.5",
        stroke: "currentColor",
        className: className,
        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
            strokeLinecap: "round",
            strokeLinejoin: "round",
            d: "M12 4.5v15m7.5-7.5h-15"
        })
    });
};


;// CONCATENATED MODULE: ./src/http/client-http.ts
class ClientHttp {
    static{
        this.API_URL = "/api";
    }
    static async get(path) {
        const response = await fetch(`${ClientHttp.API_URL}/${path}`);
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.message);
        }
        return data;
    }
    static async post(path, body) {
        const response = await fetch(`${ClientHttp.API_URL}/${path}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(body)
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.message);
        }
        return data;
    }
    static async put(path, body) {
        const response = await fetch(`${ClientHttp.API_URL}/${path}`, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(body)
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.message);
        }
        return data;
    }
    static async delete(path) {
        const response = await fetch(`${ClientHttp.API_URL}/${path}`, {
            method: "DELETE"
        });
        const data = await response.json();
        if (!response.ok) {
            throw new Error(data.message);
        }
        return data;
    }
}
const fetcher = (path)=>ClientHttp.get(path);


;// CONCATENATED MODULE: ./src/app/page.tsx













const HomePage = ()=>{
    const router = (0,navigation.useRouter)();
    const searchParams = (0,navigation.useSearchParams)();
    const chatIdParam = searchParams.get("chatId");
    const [chatId, setChatId] = (0,react_.useState)(chatIdParam);
    const [messageId, setMessageId] = (0,react_.useState)(null);
    const formRef = (0,react_.useRef)(null);
    const buttonFormSubmit = (0,react_.useRef)(null);
    const { data: chats , mutate: mutateChats  } = (0,dist/* default */.ZP)("/chats", fetcher, {
        fallbackData: [],
        revalidateOnFocus: false
    });
    const { data: messages , mutate: mutateMessages  } = (0,dist/* default */.ZP)(chatId ? `/chats/${chatId}/messages` : null, fetcher, {
        fallbackData: [],
        revalidateOnFocus: false
    });
    const { data: messageLoading , error: messageLoadingError  } = (0,subscription_dist/* default */.Z)(messageId ? `/api/messages/${messageId}/events` : null, (path, { next  })=>{
        const eventSource = new EventSource(path);
        eventSource.onmessage = (event)=>{
            const newMessage = JSON.parse(event.data);
            next(null, newMessage.content);
        };
        eventSource.onerror = (event)=>{
            eventSource.close();
            // @ts-ignore
            next(event.data, null);
        };
        eventSource.addEventListener("end", (event)=>{
            eventSource.close();
            const newMessage = JSON.parse(event.data);
            mutateMessages((messages)=>[
                    ...messages,
                    newMessage
                ], false);
            next(null, null);
        });
        return ()=>{
            console.log("CLOSE EVENT SOURCE");
            eventSource.close();
        };
    });
    async function onSubmit(event) {
        event.preventDefault();
        const textArea = event.currentTarget.querySelector("textarea");
        const message = textArea.value;
        if (!textArea.value) {
            return;
        }
        if (!chatId) {
            const newChat = await ClientHttp.post("/chats", {
                message
            });
            mutateChats([
                newChat,
                ...chats
            ], false);
            setChatId(newChat.id);
            setMessageId(newChat.messages[0].id);
        } else {
            const newMessage = await ClientHttp.post(`/chats/${chatId}/messages`, {
                message
            });
            mutateMessages([
                ...messages,
                newMessage
            ], false);
            setMessageId(newMessage.id);
        }
        textArea.value = "";
    }
    function textAreaOnKeyUp(event) {
        if (event.key === "Enter" && !event.shiftKey) {
            if (formRef.current && buttonFormSubmit.current) {
                formRef.current.requestSubmit(buttonFormSubmit.current);
            }
        }
        if (event.currentTarget.scrollHeight >= 200) {
            event.currentTarget.style.overflowY = "scroll";
        } else {
            event.currentTarget.style.overflowY = "hidden";
            event.currentTarget.style.height = "auto";
            event.currentTarget.style.height = event.currentTarget.scrollHeight + "px";
        }
    }
    function textAreaOnKeyDown(event) {
        if (event.key === "Enter" && !event.shiftKey) {
            event.preventDefault();
        }
    }
    async function logout() {
        await (0,react.signOut)({
            redirect: false
        });
        const { url: logoutUrl  } = await ClientHttp.get(`logout-url?${new URLSearchParams({
            redirect: window.location.origin
        })}`);
        window.location.href = logoutUrl;
    }
    (0,react_.useEffect)(()=>{
        setChatId(chatIdParam);
    }, [
        chatIdParam
    ]);
    (0,react_.useLayoutEffect)(()=>{
        if (!messageLoading) {
            return;
        }
        const chatting = document.querySelector("#chatting");
        chatting.scrollTop = chatting.scrollHeight;
    }, [
        messageLoading
    ]);
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("main", {
        className: "flex relative w-full h-full overflow-hidden",
        children: [
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("aside", {
                className: "flex h-screen flex-col w-[300px] p-2 bg-gray-900",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                        className: "flex p-3 gap-3 rounded hover:bg-gray-500/10 transition-colors duration-200 text-white cursor-pointer text-sm mb-1 border border-white/20",
                        onClick: ()=>{
                            router.push("/");
                            setChatId(null);
                            setMessageId(null);
                        },
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx(PlusIcon, {
                                className: "w-5 h-5"
                            }),
                            "New chat"
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "flex-grow overflow-y-auto -mr-2 overflow-hidden",
                        children: chats?.map((chat, key)=>/*#__PURE__*/ jsx_runtime_.jsx("div", {
                                className: "pb-2 text-gray-100 text-sm mr-2",
                                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                                    className: "flex p-3 gap-3 rounded hover:bg-[#3f4679] cursor-pointer hover:pr-4 group w-full",
                                    type: "button",
                                    onClick: ()=>router.push(`/?chatId=${chat.id}`),
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx(MessageIcon, {
                                            className: "h-5 w-5"
                                        }),
                                        /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                            className: "max-h-5 overflow-hidden break-all relative w-full text-left",
                                            children: [
                                                chat.messages[0].content,
                                                /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                    className: "absolute inset-y-0 right-0 w-8 z-10 bg-gradient-to-l from-gray-900 group-hover:from-[#3f4679]"
                                                })
                                            ]
                                        })
                                    ]
                                })
                            }, key))
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("button", {
                        className: "flex p-3 mt-1 gap-3 rounded hover:bg-gray-500/10 text-sm text-white",
                        onClick: logout,
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx(LogoutIcon, {
                                className: "h-5 w-5"
                            }),
                            "Log out"
                        ]
                    })
                ]
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("section", {
                className: "flex-1 flex-col relative",
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                        id: "chatting",
                        className: "h-screen overflow-y-auto bg-gray-800",
                        children: [
                            messages?.map((message)=>/*#__PURE__*/ jsx_runtime_.jsx(ChatItem, {
                                    content: message.content,
                                    is_from_bot: message.is_from_bot
                                }, message.id)),
                            messageLoading && /*#__PURE__*/ jsx_runtime_.jsx(ChatItem, {
                                content: messageLoading,
                                is_from_bot: true,
                                loading: true
                            }),
                            messageLoadingError && /*#__PURE__*/ jsx_runtime_.jsx(ChatItemError, {
                                children: messageLoadingError
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("li", {
                                className: "h-36 bg-gray-800"
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "absolute bottom-0 w-full !bg-transparent bg-gradient-to-b from-gray-800 to-gray-950/40",
                        children: /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            className: "pt-6 mb-6 mx-auto max-w-3xl",
                            children: /*#__PURE__*/ jsx_runtime_.jsx("form", {
                                ref: formRef,
                                onSubmit: onSubmit,
                                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                    className: "flex flex-col py-3 pl-4 relative text-white bg-gray-700 rounded",
                                    children: [
                                        /*#__PURE__*/ jsx_runtime_.jsx("textarea", {
                                            className: "resize-none pr-14 bg-transparent pl-0 outline-none",
                                            placeholder: "Type your message...",
                                            tabIndex: 0,
                                            rows: 1,
                                            onKeyUp: textAreaOnKeyUp,
                                            onKeyDown: textAreaOnKeyDown
                                        }),
                                        /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                            ref: buttonFormSubmit,
                                            type: "submit",
                                            className: "absolute top-1 text-gray-400 hover:text-gray-500 transition-colors bottom-2.5 rounded md:right-4",
                                            disabled: messageLoading,
                                            children: /*#__PURE__*/ jsx_runtime_.jsx(ArrowRightIcon, {
                                                className: "text-white-500 w-8"
                                            })
                                        })
                                    ]
                                })
                            })
                        })
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const page = (HomePage);


/***/ }),

/***/ 28109:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 76418))

/***/ }),

/***/ 23367:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/* __next_internal_client_entry_do_not_use__  auto */ const { createProxy  } = __webpack_require__(35985);
module.exports = createProxy("/Users/anishbista/chatbot-app/chat/src/app/page.tsx");


/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [271,314,354,528,555,17], () => (__webpack_exec__(4960)));
module.exports = __webpack_exports__;

})();